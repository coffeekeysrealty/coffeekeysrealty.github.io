<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#252525">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Coffee & Keys Realty - Chat</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            background-color: #252525;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .header {
            width: 100%;
            background-color: #252525;
            padding: 1rem;
            text-align: center;
            position: relative;
            z-index: 1000;
        }
        
        .logo {
            max-width: 300px;
            width: 85%;
            height: auto;
            margin: 0 auto;
        }

        .chat-heading {
            color: white;
            font-family: 'MS Sans Serif', 'Microsoft Sans Serif', sans-serif;
            font-size: 2.5rem;
            margin: 2rem 0;
            text-align: center;
            font-weight: normal;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 1rem;
            position: relative;
        }

        @media screen and (max-width: 768px) {
            .header {
                padding: 0.75rem;
            }
            
            .logo {
                width: 75%;
                max-width: 250px;
            }
            
            .container {
                padding: 0.5rem;
            }

            .chat-heading {
                font-size: 2rem;
                margin: 1.5rem 0;
            }
        }

        @media screen and (max-width: 320px) {
            .header {
                padding: 0.5rem;
            }
            
            .logo {
                width: 90%;
                max-width: 200px;
            }

            .chat-heading {
                font-size: 1.75rem;
                margin: 1rem 0;
            }
        }

        img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <header class="header">
        <img src="/logonew.png" alt="Coffee & Keys Realty Logo" class="logo">
    </header>
    <h1 class="chat-heading">Let's Chat</h1>
    <div class="container">
        <!-- Chat widget will be embedded here -->
    </div>

    <!-- Freshworks Chat Widget Code -->
    <script src='//fw-cdn.com/12333017/4778044.js' chat='true'></script>
    <script>
        // Function to initialize and open the widget
        function initializeWidget() {
            if (window.fcWidget) {
                // Try multiple methods to ensure the widget opens
                try {
                    window.fcWidget.open();
                } catch(e) {
                    console.log("First attempt failed, trying alternative method");
                }

                try {
                    window.fcWidget.show();
                } catch(e) {
                    console.log("Second attempt failed, trying alternative method");
                }

                try {
                    window.fcWidget.isOpen = function() { return true; };
                } catch(e) {
                    console.log("Third attempt failed");
                }
            } else {
                // If widget isn't loaded yet, try again in 1 second
                setTimeout(initializeWidget, 1000);
            }
        }

        // Start attempting to open the widget after page load
        window.addEventListener('load', function() {
            setTimeout(initializeWidget, 2000); // Wait 2 seconds after page load
        });

        // Also try when the widget is loaded
        if (window.fcWidget) {
            window.fcWidget.on("widget:loaded", function() {
                setTimeout(function() {
                    initializeWidget();
                }, 500);
            });
        }

        // Add event listener for mobile devices
        document.addEventListener('touchstart', function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
